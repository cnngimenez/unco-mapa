// Generated by CoffeeScript 2.4.1
var assign_events, fill_overview_select, load_buildings_complete, load_overview_complete;

import {
  Overview,
  Buildings
} from '../js/unco-mapa.js';

assign_events = function() {
  var btn;
  btn = document.querySelector('.btn-building');
  return btn.addEventListener('click', function() {
    var name, sel;
    sel = document.querySelector('select.building');
    name = sel.value;
    console.log(name);
    overview_map.highlight(name);
    return building_map.show_building(name, {
      x: 0.5,
      y: 0.5
    });
  });
};

// Create all the option tags with id and names from the
// overview SVG map.
fill_overview_select = function() {
  var lst_ids, select;
  lst_ids = overview_map.get_buildings();
  lst_ids.sort(function(first, second) {
    return second.name < first.name;
  });
  select = document.querySelector('select.building');
  return lst_ids.forEach((idobj) => {
    var op;
    op = "<option value=\"" + idobj.id + "\">";
    op = op + idobj.name + "</option>";
    return select.innerHTML = select.innerHTML.concat(op);
  });
};

// What to do when the overview map has been loaded?
load_overview_complete = function() {
  var height, svg, width;
  fill_overview_select();
  svg = document.querySelector('.overview-map svg');
  width = svg.getAttribute('width');
  height = svg.getAttribute('height');
  svg.setAttribute('width', width / 4);
  return svg.setAttribute('height', height / 4);
};

// What to do when the buildings map has been loaded?
load_buildings_complete = function() {
  var svg;
  // fill_building_select()
  return svg = document.querySelector('.building-map svg');
};

// width = svg.getAttribute 'width'
// height = svg.getAttribute 'height'
// svg.setAttribute 'width', width/2
// svg.setAttribute 'height', height/2
console.log('loading map...');

export var overview_map = new Overview(document.querySelector('.overview-map'), load_overview_complete);

export var building_map = new Buildings(document.querySelector('.building-map'), load_buildings_complete);

assign_events();
