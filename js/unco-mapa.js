// Generated by CoffeeScript 2.4.1
// unco-mapa.coffee --
// Copyright (C) 2020 Christian Gimenez

// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Affero General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.

// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Affero General Public License for more details.

// You should have received a copy of the GNU Affero General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.

// The classrooms map.
export var Map = (function() {
  var MAP_URL;

  class Map {
    // @param maindiv {object} The HTML SVG object.
    constructor(maindiv) {
      this.maindiv = maindiv;
      this.load_map();
    }

    // Load the map from the SVG URL.
    load_map() {
      return fetch(MAP_URL).then((result) => {
        return result.text().then((text) => {
          return this.maindiv.innerHTML = text;
        });
      });
    }

    reset_all() {
      var lst;
      lst = this.maindiv.querySelectorAll('rect');
      lst.forEach(function(elt) {
        return elt.style.fill = 'none';
      });
      lst = this.maindiv.querySelectorAll('path');
      return lst.forEach(function(elt) {
        return elt.style.fill = 'none';
      });
    }

    // Highlight the classroom name

    // @param classroom {string} The classroom ID.
    highlight(classroom) {
      var draw;
      this.reset_all();
      draw = this.maindiv.querySelector("#" + classroom);
      return draw.style.fill = 'red';
    }

  };

  MAP_URL = '../imgs/aulario.svg';

  return Map;

}).call(this);
